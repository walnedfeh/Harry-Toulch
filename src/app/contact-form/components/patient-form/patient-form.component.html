<div class="container">
    <div class="card">
        <div class="card-header bg-primary text-white d-flex justify-content-center" style="font-size: large;">
            Patient info
        </div>
        <div class="card-body">
            <div class="row">
                <mat-form-field appearance="outline" class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2">
                    <mat-label>Select Language</mat-label>
                    <mat-select [(ngModel)]="LanguageValue" (selectionChange)="MatSelectLanguage()">
                        <mat-option [value]="'en'">
                            English
                        </mat-option>
                        <mat-option [value]="'fr'">
                            Française
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <form [formGroup]="PatientForm" (ngSubmit)="onPatientFormSubmit($event)">
                <div class="row">
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" appearance="outline">
                        <!-- <mat-label>First Name <small>(required)</small></mat-label> -->
                        <mat-label>{{'patientform.formfields.fieldslables.firstName'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="firstName" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.firstName.errors?.required">Firstname is required
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.lastName'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="lastName" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.lastName.errors?.required">Lastname is required
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.birthDate'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="date" formControlName="birthDate" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.birthDate.errors?.required">Birthdate is required
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.email'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="email" formControlName="email" matInput placeholder="example@example.example">
                        <mat-error *ngIf="PatientFormSubmitted && f.email.errors?.required">E-mail is required
                        </mat-error>
                        <mat-error *ngIf="PatientFormSubmitted && f.email.errors?.email">Invalid E-mail format
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.cell'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <app-tel-input formControlName="cell"></app-tel-input>
                        <mat-hint>Include area code</mat-hint>
                        <mat-error *ngIf="PatientFormSubmitted && f.cell.errors?.invalidCell">Please enter a valid cell
                            phone number
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.phone'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.optional'| translate}})</small>
                        </mat-label>
                        <app-tel-input formControlName="phone"></app-tel-input>
                        <mat-hint>Include area code</mat-hint>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.healthCard'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.optional'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="healthCard" matInput>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.insuranceCompany'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.optional'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="insuranceCompany" matInput>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="CanadaPostInputEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.canadaAdressCompleteControl'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" [formControl]="canadaAdressCompleteControl" matInput
                            [matAutocomplete]="auto">
                        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="GetItemDetails($event.option.value)"
                            [displayWith]="displayFn" showPanel="true">
                            <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                                {{option.Next=='Find' || option.Next==''?option.Description:option.Text}}
                            </mat-option>
                        </mat-autocomplete>
                        <mat-error *ngIf="PatientFormSubmitted && canadaAdressCompleteControl.hasError('required')">
                            Address is
                            required
                        </mat-error> 
                    </mat-form-field>
                    <div class="pt-4">
                        <mat-slide-toggle [color]="'primary'" formControlName="manualAddressSelect">
                            {{'patientform.formfields.fieldslables.manualAddressSelect'| translate}}
                        </mat-slide-toggle>
                    </div>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="!CanadaPostInputEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.manualAddressText'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="manualAddressText" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.manualAddressText.errors?.required">Address is
                            required
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="AddressFieldsEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.streetName'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="streetName" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.streetName.errors?.required">Street Name is required
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="AddressFieldsEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.buildingNum'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="buildingNum" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.buildingNum.errors?.required">Building Number is
                            required
                        </mat-error>
                    </mat-form-field>
                    <!-- <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="AddressFieldsEnabled">
                        <mat-label>Building Name <small>(required)</small> </mat-label>
                        <input type="text" formControlName="BuildingName" matInput>
                    </mat-form-field> -->
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="AddressFieldsEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.subBuilding'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.optional'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="subBuilding" matInput>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="AddressFieldsEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.city'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="city" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.city.errors?.required">City is
                            required
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="AddressFieldsEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.province'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="province" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.province.errors?.required">Province is
                            required
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="AddressFieldsEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.postalCode'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="postalCode" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.postalCode.errors?.required">PostalCode is
                            required
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="col-lg-3 col-md-4 col-sm-6 col-xs-12 p-2" *ngIf="AddressFieldsEnabled"
                        appearance="outline">
                        <mat-label>{{'patientform.formfields.fieldslables.country'| translate}}
                            <small>({{'patientform.formfields.fieldslablesextras.required'| translate}})</small>
                        </mat-label>
                        <input type="text" formControlName="country" matInput>
                        <mat-error *ngIf="PatientFormSubmitted && f.postalCode.errors?.required">Country is
                            required
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="row">
                    <div class="d-flex justify-content-center">
                        <button type="submit" class="btn btn-primary">{{'patientform.submitbutton'|translate}}</button>
                    </div>
                </div>
                <div class="row" *ngIf="patientFormSpinnerEnabled">
                    <div class="d-flex justify-content-center">
                        <p-progressSpinner></p-progressSpinner>
                    </div>
                </div>


            </form>

        </div>
    </div>
</div>
<p-toast></p-toast>



<p-dialog header="Language Selection" [(visible)]="LanguageSelectionDialog" [modal]="true" [style]="{width: '50vw'}"
    [baseZIndex]="10000" [draggable]="false" [resizable]="false" [closable]="true">
    <div class="d-flex justify-content-center" style="text-align: center;">
        <p><strong>Please select you language</strong></p>
    </div>
    <div class="container">
        <div class="row">

            <div class="d-flex flex-wrap justify-content-center">
                <div class=" p-2">
                    <button pButton pRipple type="button" label="English" class="p-button-raised" style="width: 150px;"
                        (click)="DialogSelectLanguage('en')"></button>
                </div>
                <div class=" p-2">
                    <button pButton pRipple type="button" label="Française" class="p-button-raised p-button-help"
                        style="width: 150px;" (click)="DialogSelectLanguage('fr')"></button>
                </div>
            </div>
        </div>
    </div>
</p-dialog>